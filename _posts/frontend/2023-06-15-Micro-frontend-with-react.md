---
title: "Micro frontend with react"
last_modified_at: 2023-06-15T10:46:02-05:00
categories:
  - Blog
tags:
  - Micro frontend
  - React
---

아래 글을 번역 했습니다.  
[Building a micro-frontend application with eact](https://blog.logrocket.com/build-micro-frontend-application-react/)

대규모 프로젝트에서 일하면서 그들의 코드베이스를 잘 관리하는 것은 쉬운 일이 아니다.  
비록 한 동안 마이크로 프론트엔드가 관심을 받아왔지만, 마이크로 프론트엔드의 독창적 특징 때문에 여전히 관심은 증가하고 있다  

마이크로 프론트엔드 방식을 적용하면, 여러 개의 개발팀들이 서로의 모듈에 영향을 미치지 않으면서 동일한 프로젝트에서 각자의 모듈을 개발하는 방식으로 일할 수 있다.  
현재 시스템에 얼마나 많은 모듈이 추가될 것인가와 같은 것들은 문제가 되지 않는다.  

이 글에서는 마이크로 프론트엔드의 기본에 대해서 살펴보고 React를 적용해서 그 개념을 어떻게 구현할 것인지를 보고자 한다.  
또한 마이크로 프론트엔드를 사용하면 얻게 되는 이득에 대해서 논의해 보고자 한다.  

다음과 같은 내용으로 기술한다.
- 마이크로 프론트엔드 소개
- 마이크로 프론트엔드의 모범사례
- 마이크로 프론트엔드를 적용함으로써 얻게 되는 이득
- 사전조건
- 마이크로 프론트엔드 시작하기  
- 아미크로 프론트엔드 구현하기
- 모듈 추가하기

## 마이크로 프론트엔드 소개  
현재 대부분의 웹 어플리케이션 개발은 모노리틱 프론트엔드 방식으로 구축되고 있고, 이 방식이 마이크로 서비스의 주류를 이루고 있다. 그러나 서로 다른 팀들의 개발자들이 이 모노리틱 방식의 프론트엔드 개발을 함께 진행하면서 유지보수 등의 어려움이 증가하게 된다. 프론트엔드에서도 마이크로 서비스 개념을 도입함으로써 이러한 문제를 해결할 수 있다.  

**마이크로 프론트엔드라는 용어는 마이크로 서비스의 개념을 프론트엔드로 확장**한 것이다. 마이크로 프론트엔드의 목적은 (필수적으로) 서로다른 미션을 가진 독립된 팀들이 소유한 프론트엔드 모듈의 집합으로써 웹 어플리케이션을 다루는 것이다. 각 팀들은 (예컨데) UI부터 데이터베이스까지 처음부터 끝까지 자신의 모듈을 책임지게 된다.  

마이크로 프론트엔드는 어느 특별한 구조를 따르는 것도 아니며 정형화된 경계가 있는 것도 아니다. 시간이 지나면서 당신의 프로젝트는 진화할 것이고, 당신의 마이크로 프론트엔드의 보완할 필요가 있을 수도 있다.  

![image](https://github.com/lucky-sugar-park/lucky-sugar-park.github.io/assets/135287235/d340238b-3b95-4a16-ba80-f541e6964265)  
Image Source: [https://microfrontends.com/](https://microfrontends.com/)  

React는 인기 있는 프론트엔드 기술 스텍이기 때문에 마이크로 프론트엔드를 구현함에 있어서 좋은 선택지가 될 수 있다. 마이크로 프론트엔드 아키텍처는 아직까지는 새로운 개념이고 다른 프레임워크들에 의해서 채택되고 있는 중이다. (모범사례 같은 것들오 아직은 진행중이라고 할 수 있다) 때문에 Scratch로부터 마이크로 프론트엔드를 구현해 보는 것도 도전적이라는 것을 깨닫게 될 것이다.  [create-mf-app](https://github.com/jherr/create-mf-app) 를 참조해 보자.  

위 링크의 문서를 보면 [create-mf-app](https://github.com/jherr/create-mf-app) 에서는 module federation application, API server 또는 템플릿 기반의 라이브러리를 생성한다. 프레임워크 불가지론 (Agnostic) 같은데, Preact, React, Svelte 등과 같은 여러 개의 프레임워크를 지원함을 의미한다.  

## 마이크로 프론트엔드 모범사례  
마이크로 프론트엔드 아키텍처를 구현할 때에 명심해야 할 몇 가지 모범사례를 살펴볼 것이다.  

#### 팀코드 분리  
각 팀은 자신의 기능을 독립적은 어플로 개발해야 한다. 이 때, 글로벌 변수에 종속적인 공유상태를 사용하면 안된다.  
결과적으로 모든 팀이 동일한 프레임워크를 사용한다고 하더라도, 런타임 시에 공유되는 것이 없어야 한다.  

#### 팀 접두어  
아직 팀간 완전한 분리가 어렵다면, 티들은 자신들만의 네임스페이스를 상호 합의하에 사용해야 한다.  
이는 CSS, 이벤트, 로컬 스토리즈 등에 있어서 발생할 수 있는 충돌을 피하기 위함이다.

#### 탄력적인 웹 어플리케이션을 만들어라  
각 독립적 팀은 자신의 기능을 개발할 때에 탄력적인 기능을 개발해야 한다. 자바 스크립트가 불가하거나 또는 실패하더라도 그 기능은 동작해야 한다.  
추가적으로 Universal rendering과 Progressive enhancement를 통한 성능향상을 고려해야 한다.  

#### Custom API 보다는 native browser API를 사용하라 
팀 모듈간 커뮤니케이션을 할 때에는 global pub/sub 시스템을 만드는 대신에 브라우저 이벤트를 사용해야 한다.  
팀 모듈간 커뮤니테이션을 위한 API는 가능하면 간단함을 유지해야 한다  

## 마이크로 프론트엔드의 사용 이점  
마이크로 프론트엔드 웹 어플리케이션을 보다 유지보수가 편리하도록 만드는 것이 좋다.   
큰 어플리케이션의 일부 파트를 개발해 본 개발자라면 잘 알겠지만, 모든 것을 관리하는 것은 매우 굼뜬 일이다.  
마이크로 프론트엔드 방식은 **분할정복 법칙과 (Devide and conquer rule)** 유사하게 동작한다.  
마이크로 프론트엔드 방식을 적용하면 아래와 같은 가치를 얻을 수 있다.  

#### 배포와 보안  
마이크로 프론트엔드 아키텍처의 중요한 이점 중 하나는 하나의 화면을 여러 개의 부분으로 나눌수 있고 이 여러 개의 부분은 독립적으로 배포될 수 있다는 것이다.  
[Vercel](https://vercel.com/blog/monorepos) (호스팅 플랫폼 제공업체)은 상이한 (언어나 프레임워크가 다를 수도 있음) 프론트엔드를 함께 배포할 수 있다.  그렇지 않으면 [Netlify](https://www.netlify.com/)와 같은 서비스를 이용할 수 있다.  일단 마이크로 프론트엔드가 배포되면, 개별적 프론트엔드로써 사용할 수 있다.  

마이크로 프론트엔드를 보호하기 위해서는 Wildcard, 단일 또는 다중 도메인 또는 SAN SSL Certificate와 같은 SSL 인증서를 사용할 수 있다.  단일 또는 다중 도메인 SSL 인증서를 사용함으로써 다중 사이트와 서브 도메인들을 보호할 수 있다.  

#### 기술 불가지론과 확장성  
마이크로 프론트엔드 아키텍처를 적용하면, 단일 프로젝트 내에서 React, Vue, Angular와 같은 어느 개발언어나 프레임워크를 엮을 수 있다. 각 프론트엔드 팀은 자신들만의 기술 스텍을 (다른 팀과 상관 없이) 고를 수 있다.  

#### 빠른 개발  
각 팀은 분리된 어플리케이션 기능을 다룬다. 새로운 개발자들에게 (모노리스 프론트엔드에 비해서) 이런 방식이 이해하기 쉽다. 결과적으로 러닝커브가 선형적이게 되고 신규 개발자들은 비용대비 높은 결과를 낼 수 있게 된다.  

#### 종적 도메인 오너쉽  
마이크로 프론트엔드의 소개 이전에는 종적 도메인 오너쉽은 (마이크로 서비스 아키텍처를 통해서) 백엔드에서만 가능했었다. 기업들은 독립적인 팀들 사이에서 백엔드의 오너쉽을 가져가는 방식으로 제품개발을 확장할 수 있다. 하지만 프론트엔드에서는 여전히 모노리스 방식을 유지하고 있다.  

마이크로 프론트엔드의 소개로, 프론트엔드 또한 종적 도메인 컴포넌트로 나누어지고 이는 각 팀에 의해서 오너쉽에 부여된다 (UI부터 데이터베이스까지)  

#### 코드 재사용성  
마이크로 프론트엔드를 적용함으로써 코드의 재사용성을 향상시킬 수 있다. 이는 어느 한 팀이 여러 팀에 의해서 재사용될 수 있는 컴포넌트를 개발하고 배포할 수 있기 때문이다.  

#### 쉬운 테스트  
당연한 말이지만, 통합 테스트로 넘어가기 전에, 어플리케이션의 개별 부분들을 테스트하는 것이 좋다. 개발 팀들은 어플리케이션을 테스트 하기 전에 마이크로 프론트엔드를 테스트할 것이다. 이렇게 함으로써, 실제 시스템에서 버그의 가능성을 줄일 수 있다.  

이런 측면과는 별개로, **작은 코드 베이스** (쉽운 유지보수 가능
